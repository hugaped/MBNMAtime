<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot relative effects from NMAs performed at multiple time-bins — binplot • MBNMAtime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot relative effects from NMAs performed at multiple time-bins — binplot"><meta name="description" content="Plot relative effects from NMAs performed at multiple time-bins"><meta property="og:description" content="Plot relative effects from NMAs performed at multiple time-bins"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MBNMAtime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/consistencychecking-3.html">Checking for consistency</a></li>
    <li><a class="dropdown-item" href="../articles/dataexploration-1.html">Exploring the data</a></li>
    <li><a class="dropdown-item" href="../articles/mbnmatime-overview.html">MBNMAtime: Package Overview</a></li>
    <li><a class="dropdown-item" href="../articles/outputs-4.html">Outputs: Relative effects, forest plots and rankings</a></li>
    <li><a class="dropdown-item" href="../articles/predictions-5.html">Calculating model predictions</a></li>
    <li><a class="dropdown-item" href="../articles/runmbnmatime-2.html">Perform a time-course Model-Based Network Meta-Analysis (MBNMA)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot relative effects from NMAs performed at multiple time-bins</h1>

      <div class="d-none name"><code>binplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot relative effects from NMAs performed at multiple time-bins</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">binplot</span><span class="op">(</span></span>
<span>  <span class="va">network</span>,</span>
<span>  overlay.nma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">data.ab</span><span class="op">$</span><span class="va">time</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"common"</span>,</span>
<span>  link <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  lim <span class="op">=</span> <span class="st">"cred"</span>,</span>
<span>  plot.bins <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-network">network<a class="anchor" aria-label="anchor" href="#arg-network"></a></dt>
<dd><p>An object of class <code>"mb.network"</code>.</p></dd>


<dt id="arg-overlay-nma">overlay.nma<a class="anchor" aria-label="anchor" href="#arg-overlay-nma"></a></dt>
<dd><p>Numeric vector used to overlay the results from a standard NMA model that
"lumps" time-points together within the time bin ranges specified in <code>overlay.nma</code>.
The numbers in <code>overlay.nma</code> define the boundaries of the time bins within which to perform
a standard NMA. Length must be &gt;=2, or can be left as <code>NULL</code> (the default) to indicate that no NMA
should be perfomed. <code>overlay.nma</code> can only be specified if <code>overlay.ref==TRUE</code>.
See Details for further information.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Can take <code>"common"</code> or <code>"random"</code> to indicate the type of NMA model used to synthesise data points
given in <code>overlay.nma</code>. The default is <code>"random"</code> since this assumes different
time-points in <code>overlay.nma</code> have been lumped together to estimate the NMA.</p></dd>


<dt id="arg-link">link<a class="anchor" aria-label="anchor" href="#arg-link"></a></dt>
<dd><p>Can take either <code>"identity"</code> (the default),
<code>"log"</code> (for modelling Ratios of Means friedrich2011MBNMAtime) or
<code>"smd"</code> (for modelling Standardised Mean Differences - although this also corresponds to an identity link function).</p></dd>


<dt id="arg-lim">lim<a class="anchor" aria-label="anchor" href="#arg-lim"></a></dt>
<dd><p>Specifies calculation of either 95% credible intervals (<code>lim="cred"</code>) or 95% prediction intervals (<code>lim="pred"</code>).</p></dd>


<dt id="arg-plot-bins">plot.bins<a class="anchor" aria-label="anchor" href="#arg-plot-bins"></a></dt>
<dd><p>Plot time bin boundaries as vertical dashed lines. Setting <code>plot.bins=TRUE</code> if <code>overlay.nma</code>
is specified also sets x-axis ticks to time bin boundaries automatically.</p></dd>


<dt id="arg-legend">legend<a class="anchor" aria-label="anchor" href="#arg-legend"></a></dt>
<dd><p><code>TRUE</code>/<code>FALSE</code> to indicate whether a legend should be plotted.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments to be sent to R2jags.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Plots treatment effects from NMAs performed within discrete time bins. The
object returned is a list containing the plot and a sublist of NMA results and
predictions from each time bin specified in <code>overlay.nma</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Performs several standard NMAs at different time "bins", time periods within
which treatment effects are assumed to be constant over time. Separate NMAs
are then performed within each time bin on data points from studies that fall
within the time bin (only a single follow-up time is taken from each study
to avoid double counting).</p>
<p>Note that the wider the time bin boundaries specified by the user, the
larger the potential range of included follow-up times and this can
introduce heterogeneity or inconsistency.</p>
<p>Results are plotted versus the network reference and are plotted on the
specified link scale. Each time bin window is marked on the plot by
vertical dashed lines. The NMA estimates within each time bin are plotted
as a horizontal solid black line (the posterior median) with a shaded region
indicating the 95% credible interval (prediction intervals can instead
be plotted). The width of these shaded regions is equal to the range of study
time-points included in the NMA performed within that timebin, which
may therefore be more narrow than the time bin specified in the <code>binplot()</code>
command due to the follow-up times at which data is available in included
studies.</p>
    </div>
    <div class="section level2">
    <h2 id="overlaying-nma-results">Overlaying NMA results<a class="anchor" aria-label="anchor" href="#overlaying-nma-results"></a></h2>



<p><code>overlay.nma</code> indicates regions of the data (defined as "time bins") over which it may be reasonable to "lump" different
follow-up times from different studies together and assume a standard NMA model. For example:</p><ul><li><p><code>overlay.nma=c(5,10)</code> indicates a single NMA of studies with follow-up times <code>&gt;5</code> and <code>&lt;=10</code></p></li>
<li><p><code>overlay.nma=c(5,10,15)</code> indicates two NMAs should be performed of studies with follow-up times <code>&gt;5</code> and <code>&lt;=10</code>
of studies with follow-up times <code>&gt;10</code> and <code>&lt;=15</code></p></li>
</ul><p>When used with MBNMA (via <code><a href="predict.mbnma.html">predict.mbnma()</a></code>) this allows comparison to MBNMA results over a specific range of time within each time bin.
It can be useful to assess which time-course function might be suitable when using <code>binplot()</code>, or to
to assess if the MBNMA predictions are in agreement with predictions from an NMA model when using <code><a href="plot.mb.predict.html">plot.mb.predict()</a></code>
for a specific range of time-points. This can be a general indicator of the fit of the time-course model.</p>
<p>However, it is important to note that the wider the range specified in <code>overlay.nma</code>, the more likely it is that different time-points
are included, and therefore that there is greater heterogeneity/inconsistency in the NMA model. If <code>overlay.nma</code> includes
several follow-up times for any study then only a single time-point will be taken (the one closest to <code>mean(overlay.nma)</code>).
The NMA predictions are plotted over the range specified in <code>overlay.nma</code> as a horizontal line, with the 95%CrI shown by a grey
rectangle. The NMA predictions represent those for <em>any time-points within this range</em> since they lump together data at
all these time-points. Predictions for treatments that are disconnected from
the network reference treatment at data points specified within <code>overlay.nma</code> cannot be estimated so are not included.</p>
<p>It is important to note that the NMA model is not necessarily the "correct" model, since it "lumps" different time-points
together and ignores potential differences in treatment effects that may arise from this. The wider the range specified in
<code>overlay.nma</code>, the greater the effect of "lumping" and the stronger the assumption of similarity between studies.</p>
<p>For an NMA model to be estimated and a corresponding prediction to be made from it, <strong>each</strong> time bin
must include the network reference treatment (treatment=1) evaluated in at least 1 connected study in the time bin.
If a given time bin does not meet this criteria then an NMA will not be calculated for it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Create an mb.network object from a dataset</span></span></span>
<span class="r-in"><span><span class="va">alognet</span> <span class="op">&lt;-</span> <span class="fu"><a href="mb.network.html">mb.network</a></span><span class="op">(</span><span class="va">alog_pcfb</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reference treatment is `placebo`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Studies reporting change from baseline automatically identified from the data</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot relative effects from NMAs calculated for a single time-bins</span></span></span>
<span class="r-in"><span><span class="co"># Do not plot time-bin boundaries</span></span></span>
<span class="r-in"><span><span class="fu">binplot</span><span class="op">(</span><span class="va">alognet</span>, overlay.nma<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span><span class="op">)</span>, plot.bins<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running overlay.nma for time=0 and time=5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compiling model graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Resolving undeclared variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Allocating nodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Graph information:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Observed stochastic nodes: 32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Unobserved stochastic nodes: 14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total graph size: 307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Initializing model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="binplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot relative effects from NMAs at multiple time-bins</span></span></span>
<span class="r-in"><span><span class="co"># With random treatment effects</span></span></span>
<span class="r-in"><span><span class="fu">binplot</span><span class="op">(</span><span class="va">alognet</span>, overlay.nma<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  method<span class="op">=</span><span class="st">"random"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running overlay.nma for time=5 and time=10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compiling model graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Resolving undeclared variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Allocating nodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Graph information:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Observed stochastic nodes: 42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Unobserved stochastic nodes: 48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total graph size: 580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Initializing model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running overlay.nma for time=10 and time=15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compiling model graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Resolving undeclared variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Allocating nodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Graph information:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Observed stochastic nodes: 46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Unobserved stochastic nodes: 52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total graph size: 641</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Initializing model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running overlay.nma for time=15 and time=20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compiling model graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Resolving undeclared variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Allocating nodes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Graph information:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Observed stochastic nodes: 23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Unobserved stochastic nodes: 28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Total graph size: 321</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Initializing model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="binplot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Pedder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

