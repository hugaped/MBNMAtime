<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA)."><title>Write MBNMA time-course models JAGS code — mb.write • MBNMAtime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Write MBNMA time-course models JAGS code — mb.write"><meta property="og:description" content="Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MBNMAtime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/consistencychecking-3.html">Checking for consistency</a>
    <a class="dropdown-item" href="../articles/dataexploration-1.html">Exploring the data</a>
    <a class="dropdown-item" href="../articles/mbnmatime-overview.html">MBNMAtime: Package Overview</a>
    <a class="dropdown-item" href="../articles/outputs-4.html">Outputs: Relative effects, forest plots and rankings</a>
    <a class="dropdown-item" href="../articles/predictions-5.html">Calculating model predictions</a>
    <a class="dropdown-item" href="../articles/runmbnmatime-2.html">Perform a time-course Model-Based Network Meta-Analysis (MBNMA)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Write MBNMA time-course models JAGS code</h1>
      
      <div class="d-none name"><code>mb.write.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mb.write</span><span class="op">(</span></span>
<span>  fun <span class="op">=</span> <span class="fu"><a href="tpoly.html">tpoly</a></span><span class="op">(</span>degree <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  link <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  positive.scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  intercept <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rho <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  covar <span class="op">=</span> <span class="st">"varadj"</span>,</span>
<span>  omega <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  corparam <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sdscale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  class.effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  UME <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fun</dt>
<dd><p>An object of class <code>"timefun"</code> generated (see Details) using any of
<code><a href="tloglin.html">tloglin()</a></code>, <code><a href="tpoly.html">tpoly()</a></code>, <code><a href="titp.html">titp()</a></code>, <code><a href="temax.html">temax()</a></code>, <code><a href="tfpoly.html">tfpoly()</a></code>, <code><a href="tspline.html">tspline()</a></code> or <code><a href="tuser.html">tuser()</a></code></p></dd>


<dt>link</dt>
<dd><p>Can take either <code>"identity"</code> (the default),
<code>"log"</code> (for modelling Ratios of Means (Friedrich et al. 2011)
) or
<code>"smd"</code> (for modelling Standardised Mean Differences - although this also corresponds to an identity link function).</p></dd>


<dt>positive.scale</dt>
<dd><p>A boolean object that indicates whether all continuous
mean responses (y) are positive and therefore whether the baseline response
should be given a prior that constrains it to be positive (e.g. for scales that cannot be &lt;0).</p></dd>


<dt>intercept</dt>
<dd><p>A boolean object that indicates whether an intercept (written
as <code>alpha</code> in the model) is to be included. If left as <code>NULL</code> (the default), an intercept will
be included only for studies reporting absolute means, and will be excluded for
studies reporting change from baseline (as indicated in <code>network$cfb</code>).</p></dd>


<dt>rho</dt>
<dd><p>The correlation coefficient when modelling within-study correlation between time points. The default is a string representing a
prior distribution in JAGS, indicating that it be estimated from the data (e.g. <code>rho="dunif(0,1)"</code>). <code>rho</code> also be assigned a
numeric value (e.g. <code>rho=0.7</code>), which fixes <code>rho</code> in the model to this value (e.g. for use in a deterministic sensitivity analysis).
If set to <code>rho=0</code> (the default) then this implies modelling no correlation between time points.</p></dd>


<dt>covar</dt>
<dd><p>A character specifying the covariance structure to use for modelling within-study correlation between time-points. This can
be done by specifying one of the following:</p><ul><li><p><code>"varadj"</code> - a univariate likelihood with a variance adjustment to assume a constant correlation between subsequent
time points (Jansen et al. 2015)
. This is the default.</p></li>
<li><p><code>"CS"</code> - a multivariate normal likelihood with a
<a href="https://support.sas.com/resources/papers/proceedings/proceedings/sugi30/198-30.pdf" class="external-link">compound symmetry</a> structure</p></li>
<li><p><code>"AR1"</code> - a multivariate normal likelihood with an
<a href="https://support.sas.com/resources/papers/proceedings/proceedings/sugi30/198-30.pdf" class="external-link">autoregressive AR1</a> structure</p></li>
</ul></dd>


<dt>omega</dt>
<dd><p>DEPRECATED IN VERSION 0.2.3 ONWARDS (~uniform(-1,1) now used for correlation between parameters
rather than a Wishart prior).
A scale matrix for the inverse-Wishart prior for the covariance matrix used
to model the correlation between time-course parameters (see Details for time-course functions). <code>omega</code> must
be a symmetric positive definite matrix with dimensions equal to the number of time-course parameters modelled using
relative effects (<code>pool="rel"</code>). If left as <code>NULL</code> (the default) a diagonal matrix with elements equal to 1
is used.</p></dd>


<dt>corparam</dt>
<dd><p>A boolean object that indicates whether correlation should be modeled
between relative effect time-course parameters. Default is <code>FALSE</code> and this is automatically set to <code>FALSE</code> if class effects are modeled.
Setting it to <code>TRUE</code> models correlation between time-course parameters. This can help identify parameters
that are estimated poorly for some treatments by allowing sharing of information between
parameters for different treatments in the network, but may also cause some shrinkage.</p></dd>


<dt>sdscale</dt>
<dd><p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p></dd>


<dt>class.effect</dt>
<dd><p>A list of named strings that determines which time-course
parameters to model with a class effect and what that effect should be
(<code>"common"</code> or <code>"random"</code>). For example: <code>list(emax="common", et50="random")</code>.</p></dd>


<dt>UME</dt>
<dd><p>Can take either <code>TRUE</code> or <code>FALSE</code> (for an unrelated mean effects
model on all or no time-course parameters respectively) or can be a vector
of parameter name strings to model as UME. For example: <code>c("beta.1", "beta.2")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A single long character string containing the JAGS model generated
based on the arguments passed to the function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Write a linear time-course MBNMA:</span></span></span>
<span class="r-in"><span><span class="co"># random treatment effects on beta.1</span></span></span>
<span class="r-in"><span><span class="co"># equal baselines in study arms</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">mb.write</span><span class="op">(</span>fun<span class="op">=</span><span class="fu"><a href="tpoly.html">tpoly</a></span><span class="op">(</span>degree<span class="op">=</span><span class="fl">1</span>, pool.1<span class="op">=</span><span class="st">"rel"</span>, method.1<span class="op">=</span><span class="st">"random"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Write an emax time-course MBNMA with:</span></span></span>
<span class="r-in"><span><span class="co"># a Hill parameter</span></span></span>
<span class="r-in"><span><span class="co"># no intercept</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">mb.write</span><span class="op">(</span>fun<span class="op">=</span><span class="fu"><a href="temax.html">temax</a></span><span class="op">(</span>pool.emax<span class="op">=</span><span class="st">"rel"</span>, method.emax<span class="op">=</span><span class="st">"common"</span>,</span></span>
<span class="r-in"><span>    pool.et50<span class="op">=</span><span class="st">"abs"</span>, method.et50<span class="op">=</span><span class="st">"common"</span>, pool.hill<span class="op">=</span><span class="st">"abs"</span>, method.hill<span class="op">=</span><span class="st">"common"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  intercept<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'et50' parameters must take positive values.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Default half-normal prior restricts posterior to positive values.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'hill' parameters must take positive values.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Default half-normal prior restricts posterior to positive values.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Write a log-linear time-course MBNMA with:</span></span></span>
<span class="r-in"><span><span class="co"># AR1 correlation between time points</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">mb.write</span><span class="op">(</span>fun<span class="op">=</span><span class="fu"><a href="tloglin.html">tloglin</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rho<span class="op">=</span><span class="st">"dunif(0,1)"</span>, covar<span class="op">=</span><span class="st">"AR1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define a user-defined time-course relationship for the MBNMA JAGS model</span></span></span>
<span class="r-in"><span><span class="va">userfun</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">beta.1</span> <span class="op">*</span> <span class="va">time</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">beta.2</span> <span class="op">*</span> <span class="va">time</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">mb.write</span><span class="op">(</span>fun<span class="op">=</span><span class="fu"><a href="tuser.html">tuser</a></span><span class="op">(</span>fun<span class="op">=</span><span class="va">userfun</span>,</span></span>
<span class="r-in"><span>    pool.1<span class="op">=</span><span class="st">"rel"</span>, method.1<span class="op">=</span><span class="st">"random"</span>,</span></span>
<span class="r-in"><span>    pool.2<span class="op">=</span><span class="st">"rel"</span>, method.2<span class="op">=</span><span class="st">"common"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Pedder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

